(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.jQuery;var n=e.n(t);const o=window.wp.components,r=window.wp.compose,i=window.wp.data,a=window.wp.editor,l=window.wp.element,u=window.wp.i18n,c=window.wp.plugins;function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,s(o.key),o)}}function s(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var y=window,v=y.ajaxurl,w=y.VPGutenbergMetaVariables,_=function(e){function t(e){var n,o,r,i,a,l,u,c,f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=d(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}(this,t,[e])).state={oembedQuery:"",oembedHTML:""},n.maybePrepareOembed=(o=300,l=n.maybePrepareOembed.bind(n),u=[],c=null,f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u=t,c||(c=requestAnimationFrame(function(){c=null,l.apply(void 0,u)}))},f.cancel=function(){c&&(cancelAnimationFrame(c),c=null)},r=f,a=(i||{}).atBegin,function(e,t,n){var o,r=n||{},i=r.noTrailing,a=void 0!==i&&i,l=r.noLeading,u=void 0!==l&&l,c=r.debounceMode,p=void 0===c?void 0:c,f=!1,s=0;function m(){o&&clearTimeout(o)}function d(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var l=this,c=Date.now()-s;function d(){s=Date.now(),t.apply(l,r)}function b(){o=void 0}f||(u||!p||o||d(),m(),void 0===p&&c>e?u?(s=Date.now(),a||(o=setTimeout(p?b:d,e))):d():!0!==a&&(o=setTimeout(p?b:d,void 0===p?e-c:e)))}return d.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;m(),f=!n},d}(o,r,{debounceMode:!1!==(void 0!==a&&a)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(i=[{key:"componentDidMount",value:function(){this.maybePrepareOembed()}},{key:"componentDidUpdate",value:function(){this.maybePrepareOembed()}},{key:"maybePrepareOembed",value:function(){var e=this,t=this.state,o=t.oembedQuery,r=t.oembedHTML,i=this.props,a=i.getMeta;if("video"===i.postFormat){var l=a("_vp_format_video_url");o!==l&&(this.oembedAjax&&this.oembedAjax.abort&&this.oembedAjax.abort(),o||!r?this.oembedAjax=n().ajax({url:v,method:"POST",dataType:"json",data:{action:"vp_find_oembed",q:l,nonce:w.nonce},complete:function(t){var n=t.responseJSON,o={oembedQuery:l,oembedHTML:""};n&&void 0!==n.html&&(o.oembedHTML=n.html),e.setState(o),e.oembedAjax=null}}):this.setState({oembedHTML:""}))}}},{key:"render",value:function(){var e=this.props,t=e.getMeta,n=e.postFormat,r=e.updateMeta,i=this.state.oembedHTML;return"video"!==n?null:wp.element.createElement(a.PluginDocumentSettingPanel,{name:"VPVideo",title:(0,u.__)("Video","visual-portfolio"),icon:wp.element.createElement("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M19.25 10C19.25 15.1086 15.1086 19.25 10 19.25C4.89137 19.25 0.75 15.1086 0.75 10C0.75 4.89137 4.89137 0.75 10 0.75C15.1086 0.75 19.25 4.89137 19.25 10Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"transparent"}),wp.element.createElement("path",{d:"M8 12.6326V7.36671C8.00011 7.30082 8.01856 7.23618 8.05342 7.17955C8.08828 7.12293 8.13826 7.0764 8.19812 7.04485C8.25798 7.0133 8.32552 6.99789 8.39367 7.00023C8.46181 7.00257 8.52805 7.02258 8.58544 7.05816L12.8249 9.69035C12.8786 9.72358 12.9228 9.76933 12.9534 9.82337C12.984 9.87742 13 9.93803 13 9.99963C13 10.0612 12.984 10.1218 12.9534 10.1759C12.9228 10.2299 12.8786 10.2757 12.8249 10.3089L8.58544 12.9418C8.52805 12.9774 8.46181 12.9974 8.39367 12.9998C8.32552 13.0021 8.25798 12.9867 8.19812 12.9551C8.13826 12.9236 8.08828 12.8771 8.05342 12.8204C8.01856 12.7638 8.00011 12.6992 8 12.6333V12.6326Z",fill:"currentColor"})),className:"vpf-meta-video-panel"},wp.element.createElement(o.PanelRow,null,wp.element.createElement("p",{className:"description"},(0,u.sprintf)((0,u.__)("Video will be used in %s layouts only. Full list of supported links","visual-portfolio"),w.plugin_name),"Â ",wp.element.createElement("a",{href:"https://www.visualportfolio.com/docs/projects/project-formats/#supported-video-platforms",target:"_blank",rel:"noopener noreferrer"},(0,u.__)("see here","visual-portfolio")))),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.TextControl,{label:(0,u.__)("Video URL","visual-portfolio"),value:t("_vp_format_video_url")||"",onChange:function(e){r("_vp_format_video_url",e)},type:"url",placeholder:"https://",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),wp.element.createElement(o.PanelRow,null,wp.element.createElement("div",{className:"vp-oembed-preview",dangerouslySetInnerHTML:{__html:i}})))}}])&&f(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(l.Component),h=(0,r.compose)([(0,i.withSelect)(function(e){return{getMeta:function(t){return(e("core/editor").getEditedPostAttribute("meta")||{})[t]},postFormat:e("core/editor").getEditedPostAttribute("format")}}),(0,i.withDispatch)(function(e){return{updateMeta:function(t,n){var o,r,i;e("core/editor").editPost({meta:(o={},r=t,i=n,(r=s(r))in o?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i,o)})}}}),r.withInstanceId])(_);wp.editPost&&(0,c.registerPlugin)("vp-video",{render:h});const g=window.wp.hooks;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,x(o.key),o)}}function x(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(C=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var D=o.UnitControl||o.__experimentalUnitControl,k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=M(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.getMeta,n=e.featuredImageId,r=e.updateMeta;if(!n)return null;var i=t("_vp_image_focal_point");return i&&i.x&&i.y||(i={x:.5,y:.5}),wp.element.createElement("div",{className:"vpf-post-image-focal-point-panel"},wp.element.createElement(o.PanelRow,null,wp.element.createElement("p",{className:"description"},(0,u.__)("Focal point will be used in Visual Portfolio layouts only:","visual-portfolio"))),wp.element.createElement(o.PanelRow,null,wp.element.createElement(D,{label:(0,u.__)("Left","visual-portfolio"),value:100*i.x+"%",onChange:function(e){var t=j({},i);t.x=parseFloat(e)/100,r("_vp_image_focal_point",t)},min:0,max:100,step:1,units:[{value:"%",label:"%"}],__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement(D,{label:(0,u.__)("Top","visual-portfolio"),value:100*i.y+"%",onChange:function(e){var t=j({},i);t.y=parseFloat(e)/100,r("_vp_image_focal_point",t)},min:0,max:100,step:1,units:[{value:"%",label:"%"}],__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))}}])&&S(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(l.Component),L=(0,r.compose)([(0,i.withSelect)(function(e){var t=e("core/editor").getEditedPostAttribute,n=t("featured_media"),o=t("meta")||{};return{featuredImageId:n,getMeta:function(e){return o[e]}}}),(0,i.withDispatch)(function(e){return{updateMeta:function(t,n){e("core/editor").editPost({meta:E({},t,n)})}}}),r.withInstanceId])(k);(0,g.addFilter)("editor.PostFeaturedImage","vpf/post-featured-image-focal-point",function(e){return function(t){return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(e,t),wp.element.createElement(L,null))}})})();