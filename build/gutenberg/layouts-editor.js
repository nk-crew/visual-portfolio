(()=>{"use strict";var e,t={669:(e,t,o)=>{var r={};o.r(r),o.d(r,{apiFetch:()=>n,setBlockData:()=>s,updateBlockData:()=>c});var a={};o.r(a),o.d(a,{API_FETCH:()=>d});var l={};o.r(l),o.d(l,{getBlockData:()=>v});const i=window.wp.data;function n(e){return{type:"API_FETCH",request:e}}function s(e){return{type:"SET_BLOCK_DATA",data:e}}function c(e){return{type:"UPDATE_BLOCK_DATA",data:e}}const{apiFetch:u}=wp;function d({request:e}){return u(e).then((e=>!!(e&&e.success&&e.response)&&e.response))}const{VPSavedLayoutVariables:p}=window,{VPSavedLayoutVariables:f}=window;function v(e){return e.data||f.data}const h=(0,i.createReduxStore)("visual-portfolio/saved-layout-data",{reducer:function(e={data:p.data},t={}){switch(t.type){case"SET_BLOCK_DATA":if(t.data)return e?{...e,data:t.data}:t;break;case"UPDATE_BLOCK_DATA":if(t.data&&e)return{...e,data:{...e.data,...t.data}}}return e},selectors:l,actions:r,controls:a});(0,i.register)(h);const m=window.React,g=window.wp.blockEditor,k=window.wp.blocks,w=window.wp.components,E=window.wp.element,y=window.wp.hooks,b=window.wp.i18n,{navigator:_}=window;let S;function O(e){const[t,o]=(0,E.useState)(!1);return(0,m.createElement)("div",{className:"vpf-layout-shortcode-copy"},(0,m.createElement)("strong",null,e.label,":"),(0,m.createElement)("div",null,(0,m.createElement)("pre",null,e.content),(0,m.createElement)(w.Button,{isSmall:!0,onClick:()=>{_.clipboard.writeText(e.content).then((()=>{o(!0),clearTimeout(S),S=setTimeout((()=>{o(!1)}),450)}))}},(0,m.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},(0,m.createElement)("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,m.createElement)("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})),t?(0,m.createElement)("div",{className:"vpf-layout-shortcode-copied"},(0,b.__)("Copied!","visual-portfolio")):null)))}(0,k.registerBlockType)("visual-portfolio/saved-editor",{icon:{foreground:"#2540CC",src:(0,m.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,m.createElement)("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"9",y:"8",width:"5",height:"6"},(0,m.createElement)("path",{d:"M11.1409 14L13.0565 8.49994H11.2789L9.55397 14H11.1409Z",fill:"url(#paint0_linear)"})),(0,m.createElement)("g",{mask:"url(#mask0)"},(0,m.createElement)("path",{d:"M11.1409 14L13.0565 8.49994H11.2789L9.55397 14H11.1409Z",fill:"currentColor"})),(0,m.createElement)("path",{d:"M8.90795 14L6.9923 8.49994H8.76989L10.4948 14H8.90795Z",fill:"currentColor"}),(0,m.createElement)("path",{d:"M19 16.2222C19 16.6937 18.8104 17.1459 18.4728 17.4793C18.1352 17.8127 17.6774 18 17.2 18H2.8C2.32261 18 1.86477 17.8127 1.52721 17.4793C1.18964 17.1459 1 16.6937 1 16.2222V3.77778C1 3.30628 1.18964 2.8541 1.52721 2.5207C1.86477 2.1873 2.32261 2 2.8 2H7.3L9.1 4.66667H17.2C17.6774 4.66667 18.1352 4.85397 18.4728 5.18737C18.8104 5.52076 19 5.97295 19 6.44444V16.2222Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"transparent"}),(0,m.createElement)("defs",null,(0,m.createElement)("linearGradient",{id:"paint0_linear",x1:"12.191",y1:"8.49994",x2:"7.44436",y2:"15.1301",gradientUnits:"userSpaceOnUse"},(0,m.createElement)("stop",null),(0,m.createElement)("stop",{offset:"1",stopOpacity:"0"}))))},edit:function(e){const{clientId:t}=e,[o,r]=(0,E.useState)(!1),{postId:a,blockData:l,VisualPortfolioBlockEdit:n}=(0,i.useSelect)((e=>{const{getBlockData:t}=e("visual-portfolio/saved-layout-data"),{getCurrentPostId:o}=e("core/editor"),{getBlockType:r}=e("core/blocks");return{postId:o(),blockData:t(),VisualPortfolioBlockEdit:r("visual-portfolio/block")?.edit||(()=>null)}})),{updateBlockData:s}=(0,i.useDispatch)("visual-portfolio/saved-layout-data");let c=[{label:(0,b.__)("This Saved Layout","visual-portfolio"),content:`[visual_portfolio id="${a}"]`},{label:(0,b.__)("Filter","visual-portfolio"),content:`[visual_portfolio_filter id="${a}" type="minimal" align="center" show_count="false" text_all="All"]`,isOptional:!0},{label:(0,b.__)("Sort","visual-portfolio"),content:`[visual_portfolio_sort id="${a}" type="minimal" align="center"]`,isOptional:!0}];return c=(0,y.applyFilters)("vpf.layouts-editor.shortcodes-list",c,{props:e,postId:a,blockData:l,updateBlockData:s,VisualPortfolioBlockEdit:n}),(0,m.createElement)(m.Fragment,null,(0,m.createElement)(g.InspectorControls,null,(0,m.createElement)(w.PanelBody,{title:(0,b.__)("Shortcodes","visual-portfolio"),scrollAfterOpen:!0},(0,m.createElement)("p",null,(0,b.__)("To output this saved layout and its components you can use the following shortcodes:")),c.map((e=>e.isOptional?null:(0,m.createElement)(O,{key:`shortcode-${e.label}`,...e}))),o?(0,m.createElement)(m.Fragment,null,c.map((e=>e.isOptional?(0,m.createElement)(O,{key:`shortcode-${e.label}`,...e}):null)),(0,y.applyFilters)("vpf.layouts-editor.shortcodes","",this)):(0,m.createElement)(w.Button,{isLink:!0,onClick:()=>{r(!o)}},(0,b.__)("Show Additional Shortcodes","visual-portfolio")))),(0,m.createElement)(n,{attributes:{...l,block_id:l.id||t},setAttributes:e=>{s(e)},clientId:t}))},save:()=>null});const B=window.wp.apiFetch;var C=o.n(B);(0,window.wp.plugins.registerPlugin)("vpf-saved-layouts-editor",{render:function(){const{isSavingPost:e,isAutosavingPost:t,selectedBlock:o,editorSettings:r,editorMode:a,blocks:l,postId:n,blockData:s}=(0,i.useSelect)((e=>{const{isSavingPost:t,isAutosavingPost:o,getCurrentPostId:r,getEditorSettings:a}=e("core/editor"),{getSelectedBlock:l,getBlocks:i}=e("core/block-editor"),{getEditorMode:n}=e("core/edit-post"),{getBlockData:s}=e("visual-portfolio/saved-layout-data");return{isSavingPost:t(),isAutosavingPost:o(),selectedBlock:l(),editorSettings:a(),editorMode:n(),blocks:i(),postId:r(),blockData:s()}}),[]),{selectBlock:c,insertBlocks:u,resetBlocks:d}=(0,i.useDispatch)("core/block-editor"),{editPost:p}=(0,i.useDispatch)("core/editor"),{switchEditorMode:f}=(0,i.useDispatch)("core/edit-post");(0,E.useEffect)((()=>{r.richEditingEnabled&&"text"===a&&f()}),[r,a,f]);const v=(0,E.useRef)(!1);(0,E.useEffect)((()=>{v.current||1===l.length&&l[0]&&"visual-portfolio/saved-editor"===l[0].name||(v.current=!0,d([]),u((0,k.createBlock)("visual-portfolio/saved-editor")),v.current=!1)}),[l,v,d,u]);const h=(0,E.useRef)(!1);(0,E.useEffect)((()=>{if(h.current)return;if(o&&"visual-portfolio/saved-editor"===o.name)return void(h.current=!0);if(document.querySelector(".editor-post-title__block.is-selected, .editor-post-title.is-selected"))return;let e="";l.forEach((t=>{"visual-portfolio/saved-editor"===t.name&&(e=t.clientId)})),e&&c(e)}),[o,l,c]);const m=(0,E.useRef)(!1),g=(0,E.useRef)(!1);(0,E.useEffect)((()=>{s&&Object.keys(s).length&&(e||t||!m.current?m.current=JSON.stringify(s):(clearTimeout(g.current),g.current=setTimeout((()=>{m.current!==JSON.stringify(s)&&p({edited:new Date})}),150)))}),[e,t,s,p]);const w=(0,E.useRef)(!1),y=(0,E.useRef)(!1);return(0,E.useEffect)((()=>{const o=w.current&&!e&&!y.current;if(w.current=e,y.current=t,o){const e={};Object.keys(s).forEach((t=>{e[`vp_${t}`]=s[t]})),C()({path:"/visual-portfolio/v1/update_layout/",method:"POST",data:{data:e,post_id:n}}).catch((e=>{console.log(e)}))}}),[e,t,n,s]),null}})}},o={};function r(e){var a=o[e];if(void 0!==a)return a.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,o,a,l)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,a,l]=e[u],n=!0,s=0;s<o.length;s++)(!1&l||i>=l)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(n=!1,l<i&&(i=l));if(n){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,a,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={7696:0,616:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var a,l,[i,n,s]=o,c=0;if(i.some((t=>0!==e[t]))){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(s)var u=s(r)}for(t&&t(o);c<i.length;c++)l=i[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},o=globalThis.webpackChunkvisual_portfolio=globalThis.webpackChunkvisual_portfolio||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=r.O(void 0,[616],(()=>r(669)));a=r.O(a)})();