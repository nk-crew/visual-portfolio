!function(){"use strict";var t=window.wp.compose;const{jQuery:e,VPData:i}=window,{__:__}=i,o=e(window);function s(){if("function"==typeof window.Event)window.dispatchEvent(new window.Event("resize"));else{const t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}const n={};let r=!1,a=!1,l=!1;function d(){if(clearTimeout(a),!r)return;const t=e(".vp-portfolio__ready");if(t.length){let e=!1;t.each((function(){const{vpf:t}=this;if(!t)return;const i=n[t.uid]||"none";n[t.uid]=null===this.offsetParent?"hidden":"visible","hidden"===i&&"visible"===n[t.uid]&&(e=!0)})),e&&s()}else r=!1;a=setTimeout(d,500)}e(document).on("inited.vpf",(t=>{"vpf"===t.namespace&&(r=!0,d())})),document.addEventListener("keydown",(function(t){t.metaKey||t.altKey||t.ctrlKey||(l=!0)}),!0),document.addEventListener("mousedown",(()=>{l=!1}),!0),document.addEventListener("pointerdown",(()=>{l=!1}),!0),document.addEventListener("touchstart",(()=>{l=!1}),!0);class p{constructor(t,e){const i=this;i.$item=t;const o=t[0].className.split(/\s+/);for(let t=0;t<o.length;t+=1)o[t]&&/^vp-uid-/.test(o[t])&&(i.uid=o[t].replace(/^vp-uid-/,"")),o[t]&&/^vp-id-/.test(o[t])&&(i.id=o[t].replace(/^vp-id-/,""));i.uid?(i.href=window.location.href,i.$items_wrap=t.find(".vp-portfolio__items"),i.$slider_thumbnails_wrap=t.find(".vp-portfolio__thumbnails"),i.$pagination=t.find(".vp-portfolio__pagination-wrap"),i.$filter=t.find(".vp-portfolio__filter-wrap"),i.$sort=t.find(".vp-portfolio__sort-wrap"),i.id&&(i.$filter=i.$filter.add(`.vp-single-filter.vp-id-${i.id} .vp-portfolio__filter-wrap`)),i.id&&(i.$sort=i.$sort.add(`.vp-single-sort.vp-id-${i.id} .vp-portfolio__sort-wrap`)),i.userOptions=e,i.firstRun=!0,i.init()):console.error(__.couldnt_retrieve_vp)}emitEvent(t,e){e=e?[this].concat(e):[this],this.$item.trigger(`${t}.vpf`,e),this.$item.trigger(`${t}.vpf-uid-${this.uid}`,e)}init(){const t=this;t.firstRun||t.destroy(),t.destroyed=!1,t.$item.addClass("vp-portfolio__ready"),t.initOptions(),t.initEvents(),t.initLayout(),t.initCustomColors(),t.emitEvent("init"),t.id&&(e(`.vp-single-filter.vp-id-${t.id}`).addClass("vp-single-filter__ready").parent(".vp-portfolio__layout-elements").addClass("vp-portfolio__layout-elements__ready"),e(`.vp-single-sort.vp-id-${t.id}`).addClass("vp-single-sort__ready").parent(".vp-portfolio__layout-elements").addClass("vp-portfolio__layout-elements__ready")),t.resized(),t.imagesLoaded(),t.emitEvent("inited"),t.firstRun=!1}isPreview(){return!!this.$item.closest("#vp_preview").length}resized(){s(),this.emitEvent("resized")}imagesLoaded(){this.$items_wrap.imagesLoaded&&this.$items_wrap.imagesLoaded().progress((()=>{this.emitEvent("imagesLoaded")}))}destroy(){const t=this;t.$item.removeClass("vp-portfolio__ready"),t.id&&(e(`.vp-single-filter.vp-id-${t.id}`).removeClass("vp-single-filter__ready").parent(".vp-portfolio__layout-elements").removeClass("vp-portfolio__layout-elements__ready"),e(`.vp-single-sort.vp-id-${t.id}`).removeClass("vp-single-sort__ready").parent(".vp-portfolio__layout-elements").removeClass("vp-portfolio__layout-elements__ready")),t.destroyEvents(),t.removeStyle(),t.renderStyle(),t.emitEvent("destroy"),t.destroyed=!0}addStyle(t,i,o){o=o||"";const s=this,{uid:n}=s;s.stylesList||(s.stylesList={}),void 0===s.stylesList[n]&&(s.stylesList[n]={}),void 0===s.stylesList[n][o]&&(s.stylesList[n][o]={}),void 0===s.stylesList[n][o][t]&&(s.stylesList[n][o][t]={}),s.stylesList[n][o][t]=e.extend(s.stylesList[n][o][t],i),s.emitEvent("addStyle",[t,i,o,s.stylesList])}removeStyle(t,e,i){i=i||"";const o=this,{uid:s}=o;o.stylesList||(o.stylesList={}),void 0===o.stylesList[s]||t||(o.stylesList[s]={}),void 0!==o.stylesList[s]&&void 0!==o.stylesList[s][i]&&void 0!==o.stylesList[s][i][t]&&t&&delete o.stylesList[s][i][t],o.emitEvent("removeStyle",[t,e,o.stylesList])}renderStyle(){const t=this,{uid:i}=t;let o="";t.stylesList||(t.stylesList={}),void 0!==t.stylesList[i]&&Object.keys(t.stylesList[i]).forEach((e=>{e&&(o+=`@media ${e} {`),Object.keys(t.stylesList[i][e]).forEach((s=>{const n=`.vp-uid-${i}`;let r=`${n} ${s}`;r=r.replace(/, |,/g,`, ${n} `),o+=`${r} {`,Object.keys(t.stylesList[i][e][s]).forEach((n=>{o+=`${n}:${t.stylesList[i][e][s][n]};`})),o+="}"})),e&&(o+="}")}));let s=e(`#vp-style-${i}`);s.length||(s=e("<style>").attr("id",`vp-style-${i}`).appendTo("head")),s.html(o),t.emitEvent("renderStyle",[o,t.stylesList,s])}firstToLowerCase(t){return t.substr(0,1).toLowerCase()+t.substr(1)}initOptions(t){const i=this;i.defaults={layout:"tile",itemsGap:0,pagination:"load-more"},t&&(i.userOptions=t);const o=i.$item[0].dataset,s={};Object.keys(o).forEach((t=>{t&&"vp"===t.substring(0,2)&&(s[i.firstToLowerCase(t.substring(2))]=o[t])})),i.options=e.extend({},i.defaults,s,i.userOptions),i.emitEvent("initOptions")}initEvents(){const t=this,i=`.vpf-uid-${t.uid}`;function s(){const e=t.$item[0].getBoundingClientRect(),{left:i}=e,o=window.innerWidth-e.right,s=parseFloat(t.$item.css("margin-left")||0),n=parseFloat(t.$item.css("margin-right")||0);t.$item.css({marginLeft:s-i,marginRight:n-o,maxWidth:"none",width:"auto"})}t.$item.hasClass("vp-portfolio__stretch")&&!t.isPreview()&&(o.on(`load${i} resize${i} orientationchange${i}`,(()=>{s()})),s()),t.$item.on(`focus${i}`,".vp-portfolio__item a",(function(){const t=e(this).closest(".vp-portfolio__item");t.addClass("vp-portfolio__item-focus"),l&&t.addClass("vp-portfolio__item-focus-visible")})),t.$item.on(`blur${i}`,".vp-portfolio__item a",(function(){e(this).closest(".vp-portfolio__item").removeClass("vp-portfolio__item-focus vp-portfolio__item-focus-visible")})),t.$filter.on(`click${i}`,".vp-filter .vp-filter__item a",(function(i){i.preventDefault();const o=e(this);t.loading||o.closest(".vp-filter__item").addClass("vp-filter__item-active").siblings().removeClass("vp-filter__item-active"),t.loadNewItems(o.attr("href"),!0)})),t.$sort.on(`click${i}`,".vp-sort .vp-sort__item a",(function(i){i.preventDefault();const o=e(this);t.loading||o.closest(".vp-sort__item").addClass("vp-sort__item-active").siblings().removeClass("vp-sort__item-active"),t.loadNewItems(o.attr("href"),!0)})),t.$filter.add(t.$sort).on(`change${i}`,".vp-filter select, .vp-sort select",(function(){const i=e(this),o=i.val(),s=i.find(`[value="${o}"]`);s.length&&t.loadNewItems(s.attr("data-vp-url"),!0)})),t.$item.on(`click${i}`,".vp-pagination .vp-pagination__item a",(function(i){i.preventDefault();const o=e(this),s=o.closest(".vp-pagination");if((!s.hasClass("vp-pagination__no-more")||"paged"===t.options.pagination)&&(t.loadNewItems(o.attr("href"),"paged"===t.options.pagination),"paged"===t.options.pagination&&s.hasClass("vp-pagination__scroll-top"))){const i=e("#wpadminbar"),o=window.pageYOffset||document.documentElement.scrollTop;let{top:n}=t.$item.offset();s.attr("data-vp-pagination-scroll-top")&&(n-=parseInt(s.attr("data-vp-pagination-scroll-top"),10)||0),i.length&&"fixed"===i.css("position")&&(n-=i.outerHeight()),n=Math.max(0,n),o>n&&window.scrollTo({top:n,behavior:"smooth"})}})),t.$item.on(`click${i}`,".vp-portfolio__items .vp-portfolio__item-meta-category a",(function(i){i.preventDefault(),i.stopPropagation(),t.loadNewItems(e(this).attr("href"),!0)})),t.$item.on(`transitionend${i}`,".vp-portfolio__items",(e=>{e.currentTarget===e.target&&t.resized()})),t.emitEvent("initEvents")}destroyEvents(){const t=this,e=`.vpf-uid-${t.uid}`;t.$item.off(e),t.$filter.off(e),t.$sort.off(e),o.off(e),t.emitEvent("destroyEvents")}initLayout(){this.emitEvent("initLayout"),this.renderStyle()}initCustomColors(){const t=this;t.$item.find("[data-vp-bg-color]").each((function(){const i=e(this).attr("data-vp-bg-color");t.addStyle(`[data-vp-bg-color="${i}"]`,{"background-color":`${i} !important`})})),t.$item.find("[data-vp-text-color]").each((function(){const i=e(this).attr("data-vp-text-color");t.addStyle(`[data-vp-text-color="${i}"]`,{color:`${i} !important`})})),t.renderStyle(),t.emitEvent("initCustomColors")}addItems(t,e,i){this.emitEvent("addItems",[t,e,i])}removeItems(t){this.emitEvent("removeItems",[t])}loadNewItems(t,i,o){const s=this,{randomSeed:n}=s.options;if(s.loading&&void 0===s.loading.readyState||!t||s.href===t)return;s.loading&&s.loading.readyState&&s.loading.abort&&s.loading.abort();const r={method:"POST",url:t,data:{vpf_ajax_call:!0,vpf_random_seed:void 0!==n&&n},complete({responseText:e}){s.href=t,s.replaceItems(e,i,o)}};s.loading=!0,s.$item.addClass("vp-portfolio__loading"),s.emitEvent("startLoadingNewItems",[t,r]),s.loading=e.ajax(r)}replaceItems(t,i,o){const s=this;if(!t)return;t=t.replace("<body",'<body><div id="vp-ajax-load-body"').replace("</body>","</div></body>");const n=e(t).filter("#vp-ajax-load-body"),r=n.find(`.vp-portfolio.vp-uid-${s.uid}`);if(r.length){const a=r.find(".vp-portfolio__items").html(),l=r.hasClass("vp-portfolio-not-found");s.$item.find(".vp-notice").remove(),l?(s.$item.find(".vp-portfolio__items-wrap").before(r.find(".vp-notice").clone()),s.$item.addClass("vp-portfolio-not-found")):s.$item.removeClass("vp-portfolio-not-found"),s.$filter.length&&s.$filter.each((function(){const t=e(this);let i="";i=t.parent().hasClass("vp-single-filter")?n.find(`[class="${t.parent().attr("class").replace(" vp-single-filter__ready","")}"] .vp-portfolio__filter-wrap`).html():r.find(".vp-portfolio__filter-wrap").html(),t.html(i)})),s.$sort.length&&s.$sort.each((function(){const t=e(this);let i="";i=t.parent().hasClass("vp-single-sort")?n.find(`[class="${t.parent().attr("class").replace(" vp-single-sort__ready","")}"] .vp-portfolio__sort-wrap`).html():r.find(".vp-portfolio__sort-wrap").html(),t.html(i)})),s.$pagination.length&&s.$pagination.html(r.find(".vp-portfolio__pagination-wrap").html()),s.addItems(e(a),i,r),s.emitEvent("loadedNewItems",[r,i,t]),o&&o()}const a=r.attr("data-vp-next-page-url");s.options.nextPageUrl=a,s.$item.attr("data-vp-next-page-url",a),s.$item.removeClass("vp-portfolio__loading"),s.loading=!1,s.emitEvent("endLoadingNewItems"),s.imagesLoaded(),s.initCustomColors()}}e(document).trigger("extendClass.vpf",[p]);const v=function(t,...i){let o;return this.each((function(){void 0===o&&("object"==typeof t||void 0===t?this.vpf||(this.vpf=new p(e(this),t)):this.vpf&&(o=this.vpf[t](...i)))})),void 0!==o?o:this};v.constructor=p;const f=e.fn.vpf;e.fn.vpf=v,e.fn.vpf.noConflict=function(){return e.fn.vpf=f,this},e((()=>{e(".vp-portfolio").vpf()}));const c=(0,t.throttle)(200,(m=()=>{e(".vp-portfolio:not(.vp-portfolio__ready)").vpf()},_=[],u=null,h=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];_=e,u||(u=requestAnimationFrame((function(){u=null,m.apply(void 0,_)})))},h.cancel=function(){u&&(cancelAnimationFrame(u),u=null)},h));var m,_,u,h;window.MutationObserver?new window.MutationObserver(c).observe(document.documentElement,{childList:!0,subtree:!0}):e(document).on("DOMContentLoaded DOMNodeInserted load",(()=>{c()}))}();